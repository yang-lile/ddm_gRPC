syntax = "proto3";

package rulers;

service DDM{
  // get all rulers
  rpc getRulers(Empty) returns (stream Ruler) {}

  // get ruler likes
  rpc getStars(RulerId) returns (Stars) {}

  // get path data
  rpc getPath(RulerId) returns (stream PathData) {}

  rpc getVersion(Version) returns (NeedUpdate) {}
}

message Empty{}

// meta data to save any class-enum
enum MetaData{
  DEFAULT = 0;
  // Normal
  TEXT = 1;
  PASS_WORD = 2;
  // special
  TIME = 3;
  ADDRESS = 4;
  FILE = 5;
  PERIOD = 6;
}

message RulerId {
  string source = 1;
  string ruleName = 2;
}

message Ruler{
  // base data
  RulerId rulerId = 1;
  string instruction = 2;
  // maybe user has any default value
  repeated string defaultValues = 3;
  repeated string scenesUsed = 4;
  // compose
  repeated MetaData metaData = 5;
}

message Stars {
  int32 starNumber = 1;
}

message PathData {
  string path = 1;
}

message Version {
  int32 version = 1;
}

message NeedUpdate{
  bool needUpdate = 1;
}
